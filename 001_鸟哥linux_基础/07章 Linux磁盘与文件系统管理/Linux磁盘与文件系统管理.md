[TOC]

# Linux 磁盘与文件系统管理

## 章节主要任务

1. 必须管理好磁盘文件系统, 每个分区槽不能太大，也不能太小。
2. 我们谈到的的文件权限和属性，这些权限和属性分别记录在哪里？  就得要谈到filesystem中的inode与block
3. 为了虚拟化和大容量磁盘，centos7 默认使用大容量效能较佳的Xfs当做文件系统
4. 制作文件系统，分区、格式化、挂载

## 认识Linux 文件系统

Linux最传统的磁盘文件系统使用的是EXT2，所以需要从EXT2开始了解。  首先回顾了解磁盘物理组成(快速过   主要inode、block、superblock)

### 磁盘组成与分区的复习
* 圆形的磁盘盘 (主要记录数据区)
* 机械手臂，与读取头 (可擦写磁盘盘上的数据)
* 主轴马达 (转动磁盘盘)

> 重点回顾
>> * 扇区为最小的物理存储单位，(有512bytes与4k两种)
>> * 将扇区组成一个圆，就是磁柱
>> * 早期磁盘以磁柱为最小分割单位，现在通常为扇区
>> *  磁盘分区表两种格式(MBR  GPT)
>> * MBR第一个扇区很重要 <br /> {1. 主要分区纪录区(master boot record,MBR) 446字节 <br /> 2. 分区表(partition table) 64字节}
>> * gpt分区分区数量扩充较多，支持的磁盘容量可以超过2T

### 磁盘文件名
> * 基本上所有的实体磁盘都被模拟为 /dev/sd[a-p][1-128]
> * 虚拟机磁盘通常为 /dev/vd[a-p][1-128]
> * 若使用软件磁盘阵列 /dev/md[0-128]
> * 使用的是LVM 当名为 /dev/VGNAME/LVNAME

### 文件系统特性
* 磁盘分区完毕后还需要进行格式化，之后操作系统才能使用这个文件系统。
    > * 因为每个操作系统所设定的文件属性/权限并不相同，为了存放这些文件所需的数据，因此就需要将分区槽进行格式化，以成为操作系统能够利用的文件系统格式(filesystem)
    > * 所以每个操作系统能够使用的文件系统并不相同 Linux正统为Ext2(Linux second extended file system,ext2fs)，默认情况下window不会认识Ext2文件系统
 * 传统的磁盘与文件系统中，一个分区槽只能被格式化为一个文件系统，
    > 但是新技术的发展, LVM   和 软件磁盘阵列(software raid),能够将一个分区槽格式化为多个文件系统(LVM) 
    > 也能将多个分区槽合成一个文件系统(LVM, RAID)
* 目前我们称呼一个可被挂载的数据为一个文件系统
